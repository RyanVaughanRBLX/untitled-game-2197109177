# hubhub-template
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.6.1.

## Getting Started

### Prerequisites
This project uses [Aftman](https://github.com/LPGhatguy/aftman) to manage tooling. Install it first:

```bash
cargo install aftman
# or
gh release download -R LPGhatguy/aftman -p '*-linux.zip' && unzip aftman-*-linux.zip && mv aftman ~/.local/bin/
```

Then install all project tools:

```bash
aftman install
```

This will install:
- **Rojo** - Sync your code to Roblox Studio
- **Selene** - Lua/Luau linter
- **StyLua** - Code formatter
- **Luau LSP** - Language server with type checking

### Building

To build the place from scratch, use:

```bash
rojo build -o "hubhub-template.rbxlx"
```

Next, open `hubhub-template.rbxlx` in Roblox Studio and start the Rojo server:

```bash
rojo serve
```

For more help, check out [the Rojo documentation](https://rojo.space/docs).

## Development Tools

### Code Quality

This project includes several tools to maintain code quality:

#### Linting with Selene
Run the linter to check for code issues:

```bash
selene src/
```

Configuration is in `selene.toml`.

#### Code Formatting with StyLua
Format your code automatically:

```bash
stylua src/
```

Check if code is formatted without modifying files:

```bash
stylua --check src/
```

Configuration is in `stylua.toml`.

#### Type Checking with Luau LSP
First, download the Roblox type definitions (if not already present):

```bash
curl -L -o globalTypes.d.luau https://raw.githubusercontent.com/JohnnyMorganz/luau-lsp/main/scripts/globalTypes.d.luau
```

Then generate a sourcemap and run type checking:

```bash
rojo sourcemap default.project.json --output sourcemap.json
luau-lsp analyze --sourcemap=sourcemap.json --definitions=globalTypes.d.luau src/
```

Configuration is in `.luaurc`. The `globalTypes.d.luau` file contains comprehensive Roblox API type definitions.

### VS Code Setup

If you're using VS Code, the project includes recommended extensions. Install them for the best development experience:
- **Luau LSP** - IntelliSense and type checking
- **StyLua** - Automatic formatting
- **Selene** - Inline linting warnings
- **Rojo** - Roblox Studio integration

The workspace settings (`.vscode/settings.json`) are pre-configured to:
- Enable format-on-save
- Auto-generate sourcemaps
- Configure path aliases
- Set up type definitions

## Automated Publishing

This project includes a GitHub Actions workflow that automatically builds and publishes your place to Roblox when you push to the `main` branch.

### Setup Instructions

To enable automated publishing, you need to configure the following GitHub secrets in your repository:

1. **ROBLOX_API_KEY**: Your Roblox Open Cloud API key
   - Go to [Roblox Creator Dashboard](https://create.roblox.com/credentials)
   - Click "Create API Key"
   - Give it a name (e.g., "GitHub Actions Deploy")
   - Add the following permissions:
     - `universe-places.write` (to publish place files)
   - Select your experience/universe
   - Copy the API key (you won't be able to see it again!)

2. **ROBLOX_UNIVERSE_ID**: Your game's Universe ID
   - Go to your game's page on Roblox
   - The Universe ID is in the URL: `https://www.roblox.com/games/PLACE_ID/game-name`
   - Or find it in [Creator Dashboard](https://create.roblox.com/dashboard/creations) under your experience

3. **ROBLOX_PLACE_ID**: Your place's Place ID
   - Found in the same URL as above, or in Creator Dashboard
   - This is the specific place within your universe you want to update

### Adding Secrets to GitHub

1. Go to your repository on GitHub
2. Click "Settings" → "Secrets and variables" → "Actions"
3. Click "New repository secret"
4. Add each of the three secrets listed above

### Manual Trigger

You can also manually trigger the workflow from the "Actions" tab in your GitHub repository by clicking "Run workflow".

### Workflow Details

The CI/CD pipeline runs in two stages:

#### 1. Lint and Type Check (runs on all pushes and PRs)
- Installs all tools via Aftman
- Runs Selene linting on the codebase
- Checks code formatting with StyLua
- Performs Luau type checking with luau-lsp

#### 2. Build and Publish (only runs on `main` branch)
- Generates a Rojo sourcemap
- Builds your place file from `default.project.json`
- Uploads the built place file as an artifact (available for 7 days)
- Publishes the place to Roblox using the Open Cloud API

The build job only runs if linting and type checking pass successfully.